{"version":3,"sources":["harukaze.js","lib/actions.js","lib/debug.js","lib/dispatcher.js","lib/logger.js","lib/messages.js","lib/mixin.js","lib/store.js","node_modules/es6-promise/dist/es6-promise.js"],"names":["_","_require","debug","store","actions","messages","mixin","module","exports","extend","Mixin","logger","action","name","fn","logActionStart","arguments","promise","apply","logActionPromiseResult","enabled","Promise","Bacon","bus","Bus","dirtyStores","dispatching","dispatch","type","payload","reject","resolve","logMessage","push","pushChanges","logMessageEnd","input","payloads","filter","msg","map","markStoreAsDirty","contains","pushChangesOnce","stores","each","changes","output","length","logNoDirtyStores","also","logDirtyStores","args","console","group","then","res","log","groupEnd","err","stack","process","nextTick","rethrow","pluck","join","dispatcher","message","bind","React","wire","arg","component","harukaze","_harukaze","unsubscribers","unsubscribe","isFunction","onValue","isArray","setState","pick","componentWillUnmount","f","displayName","spec","obj","methods","gatherStoreMethods","bindStoreMethods","wireStore","keys","key","stream","property","value","$$utils$$objectOrFunction","x","$$utils$$isFunction","$$utils$$isMaybeThenable","$$utils$$_isArray","Array","Object","prototype","toString","call","$$utils$$isArray","$$utils$$now","Date","now","getTime","$$utils$$F","$$utils$$o_create","create","o","Error","TypeError","$$asap$$len","$$asap$$default","asap","callback","$$asap$$queue","$$asap$$scheduleFlush","$$asap$$browserGlobal","window","$$asap$$BrowserMutationObserver","MutationObserver","WebKitMutationObserver","$$asap$$isWorker","Uint8ClampedArray","importScripts","MessageChannel","$$asap$$useNextTick","$$asap$$flush","$$asap$$useMutationObserver","iterations","observer","node","document","createTextNode","observe","characterData","data","$$asap$$useMessageChannel","channel","port1","onmessage","port2","postMessage","$$asap$$useSetTimeout","setTimeout","i","undefined","$$$internal$$noop","$$$internal$$PENDING","$$$internal$$FULFILLED","$$$internal$$REJECTED","$$$internal$$GET_THEN_ERROR","$$$internal$$ErrorObject","$$$internal$$selfFullfillment","$$$internal$$cannotReturnOwn","$$$internal$$getThen","error","$$$internal$$tryThen","fulfillmentHandler","rejectionHandler","e","$$$internal$$handleForeignThenable","thenable","sealed","$$$internal$$resolve","$$$internal$$fulfill","reason","$$$internal$$reject","_label","$$$internal$$handleOwnThenable","_state","_result","$$$internal$$subscribe","$$$internal$$handleMaybeThenable","maybeThenable","constructor","$$$internal$$publishRejection","_onerror","$$$internal$$publish","_subscribers","parent","child","onFulfillment","onRejection","subscribers","settled","detail","$$$internal$$invokeCallback","$$$internal$$TRY_CATCH_ERROR","$$$internal$$tryCatch","hasCallback","succeeded","failed","$$$internal$$initializePromise","resolver","resolvePromise","rejectPromise","$$$enumerator$$makeSettledResult","state","position","$$$enumerator$$Enumerator","Constructor","abortOnReject","label","_instanceConstructor","_abortOnReject","_validateInput","_input","_remaining","_init","_enumerate","_validationError","$$$enumerator$$default","_eachEntry","entry","c","_settledAt","_willSettleAt","_makeResult","enumerator","$$promise$all$$default","all","entries","$$promise$race$$default","race","$$promise$resolve$$default","object","$$promise$reject$$default","$$es6$promise$promise$$counter","$$es6$promise$promise$$needsResolver","$$es6$promise$promise$$needsNew","$$es6$promise$promise$$default","$$es6$promise$promise$$Promise","_id","result","$$es6$promise$polyfill$$default","polyfill","local","global","self","es6PromiseSupport","r","es6$promise$umd$$ES6Promise","define"],"mappings":"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","file":"harukaze.js","sourceRoot":"/source/","sourcesContent":["var _ = require('lodash');\n\nvar debug = require('./lib/debug');\nvar store = require('./lib/store');\nvar actions = require('./lib/actions');\nvar messages = require('./lib/messages');\nvar mixin = require('./lib/mixin');\n\nmodule.exports = _.extend({}, debug, store, actions, messages, {\n  Mixin: mixin\n});\n","'use strict';\n\nvar logger = require('./logger');\n\nfunction action(name, fn) {\n  return function () {\n    logger.logActionStart(name, arguments);\n    var promise = fn.apply(action, arguments);\n    logger.logActionPromiseResult(name, promise);      \n    return promise;   \n  };\n}\n\nmodule.exports = {\n  action: action\n};\n","'use strict';\n\nvar enabled = false;\n\nmodule.exports = {\n  debug: {\n    enabled: enabled    \n  }\n};\n","'use strict';\n\nvar _ = require('lodash');\nvar Promise = require('es6-promise').Promise;\nvar Bacon = require('baconjs');\nvar logger = require('./logger');\n\nvar bus = new Bacon.Bus();\nvar dirtyStores = [];\nvar dispatching = false;\n\nfunction dispatch(type, payload) {\n  if (dispatching) {\n    return Promise.reject('Cascading dispatches are prohibited. Fix your flux.');\n  }\n  return new Promise(function (resolve, reject) {\n    dispatching = true;\n    logger.logMessage(type, payload);\n    try {\n      bus.push({type: type, payload: payload});\n      pushChanges();\n      resolve();\n    } finally {\n      logger.logMessageEnd();\n      dispatching = false;\n    }\n  });\n}\n\nfunction input(type) {\n  var payloads = bus.filter(function (msg) {\n     return msg.type === type;\n  }).map('.payload');\n  return payloads;\n}\n\nfunction markStoreAsDirty(store) {\n  if (!_.contains(dirtyStores, store)) {\n    dirtyStores.push(store);    \n  }\n}\n\nfunction pushChangesOnce() {\n  var stores = dirtyStores;\n  dirtyStores = [];\n  _.each(stores, function (store) {\n    store.changes.push(store.output);      \n  });\n}\n\nfunction pushChanges() {\n  if (!dirtyStores.length) {\n    logger.logNoDirtyStores();\n    return;\n  }\n  var also = false;\n  while(dirtyStores.length > 0) {\n    logger.logDirtyStores(dirtyStores, also);\n    pushChangesOnce();\n    also = true;\n  }\n}\n\nmodule.exports = {\n  dispatch: dispatch,\n  input: input,\n  markStoreAsDirty: markStoreAsDirty\n};\n","'use strict';\n\nvar _ = require('lodash');\nvar debug = require('./debug').debug;\n\nmodule.exports = {\n  logActionStart: function (name, args) {\n    if (!debug.enabled) { return; }\n    if (!args.length) {\n      console.group('ACTION %s', name);     \n    } else {\n      console.group('ACTION %s: %o', name, args);           \n    }\n  },\n\n  logActionPromiseResult: function (name, promise) {\n    if (!debug.enabled) { return; }\n    promise.then(function(res) {\n      console.log('[OK] %o', res);\n      console.groupEnd();\n    }, function(err) {\n      if (err.stack) {\n        console.log('[ERR, RETHROWN] %s', err);\n        process.nextTick(function rethrow() { throw err; });        \n      } else {\n        console.log('[ERR] %o', err);        \n      }\n      console.groupEnd();\n    });\n  },\n\n  logMessage: function (name, payload) {\n    if (!debug.enabled) { return; }\n    if (payload) {\n      console.group('MESSAGE %s: %o', name, payload);\n    } else {\n      console.group('MESSAGE %s', name);    \n    }\n  },\n  \n  logDirtyStores: function (dirtyStores, also) {\n    if (!debug.enabled) { return; }\n    if (dirtyStores.length) {\n      console.log(\"%sCHANGED STORES: %s\", (also ? 'ALSO ' : ''), _.pluck(dirtyStores, 'displayName').join(', '));\n    } else {\n      console.log(\"NO STORES CHANGED.\");\n    }\n  },\n\n  logNoDirtyStores: function () {\n    if (!debug.enabled) { return; }\n    console.log(\"NO STORES CHANGED.\");\n  },\n\n  logMessageEnd: function () {\n    if (!debug.enabled) { return; }\n    console.groupEnd();\n  }\n};\n","'use strict';\n\nvar dispatcher = require('./dispatcher');\n\nfunction message(type) {\n  return dispatcher.dispatch.bind(dispatcher, type);\n}\n\nmodule.exports = {\n  message: message\n};\n","'use strict';\n\nvar _ = require('lodash');\nvar React = require('react');\n\nvar Mixin = {\n  wire: function(store, arg) {\n    var component = this;\n    var harukaze = this._harukaze = this._harukaze || {};\n    var unsubscribers = harukaze.unsubscribers = harukaze.unsubscribers || [];\n    var unsubscribe = null;\n    \n    if (_.isFunction(arg)) {\n      unsubscribe = store.changes.onValue(arg);\n    } else if (_.isArray(arg)) {\n      unsubscribe = store.changes.onValue(function (output) {\n        component.setState(_.pick(output, arg));\n      })\n    }\n    \n    unsubscribers.push(unsubscribe);\n    return unsubscribe;\n  },\n\n  componentWillUnmount: function() {\n    var harukaze = this._harukaze;\n    if (harukaze) {\n      var unsubscribers = harukaze.unsubscribers;\n      if (unsubscribers) {\n        _.each(unsubscribers, function (f) { f(); });\n      }\n    }  \n  }\n};\n\nmodule.exports = Mixin;\n","'use strict';\n\nvar _ = require('lodash');\nvar Bacon = require('baconjs');\nvar dispatcher = require('./dispatcher');\n\nfunction store(displayName, spec) {\n  var changes = new Bacon.Bus();  \n  var obj = {\n    displayName: displayName,\n    output: _.extend({}, spec.output),\n    changes: changes\n  };\n  \n  var methods = gatherStoreMethods(spec);\n  bindStoreMethods(spec, obj, methods);\n  wireStore(spec, obj, dispatcher.input);\n  return obj;\n}\n\nfunction gatherStoreMethods(spec) {\n  return _.reject(_.keys(spec), function (key) {\n    return _.contains(['output'], key);\n  });\n}\n\nfunction bindStoreMethods(spec, store, methods) {\n  _.each(methods, function(key) {\n    store[key] = _.bind(spec[key], store);\n  });\n}\n\nfunction wireStore(spec, store, input) {\n  function output(stream, property) {\n    stream.onValue(function (value) {\n      if (store.output[property] != value) {\n        store.output[property] = value;\n        dispatcher.markStoreAsDirty(store);        \n      }\n    });\n  }\n  store.wire(input, output);\n} \n  \nmodule.exports = {\n  store: store\n};\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   2.0.1\n */\n\n(function() {\n    \"use strict\";\n\n    function $$utils$$objectOrFunction(x) {\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\n    }\n\n    function $$utils$$isFunction(x) {\n      return typeof x === 'function';\n    }\n\n    function $$utils$$isMaybeThenable(x) {\n      return typeof x === 'object' && x !== null;\n    }\n\n    var $$utils$$_isArray;\n\n    if (!Array.isArray) {\n      $$utils$$_isArray = function (x) {\n        return Object.prototype.toString.call(x) === '[object Array]';\n      };\n    } else {\n      $$utils$$_isArray = Array.isArray;\n    }\n\n    var $$utils$$isArray = $$utils$$_isArray;\n    var $$utils$$now = Date.now || function() { return new Date().getTime(); };\n    function $$utils$$F() { }\n\n    var $$utils$$o_create = (Object.create || function (o) {\n      if (arguments.length > 1) {\n        throw new Error('Second argument not supported');\n      }\n      if (typeof o !== 'object') {\n        throw new TypeError('Argument must be an object');\n      }\n      $$utils$$F.prototype = o;\n      return new $$utils$$F();\n    });\n\n    var $$asap$$len = 0;\n\n    var $$asap$$default = function asap(callback, arg) {\n      $$asap$$queue[$$asap$$len] = callback;\n      $$asap$$queue[$$asap$$len + 1] = arg;\n      $$asap$$len += 2;\n      if ($$asap$$len === 2) {\n        // If len is 1, that means that we need to schedule an async flush.\n        // If additional callbacks are queued before the queue is flushed, they\n        // will be processed by this flush that we are scheduling.\n        $$asap$$scheduleFlush();\n      }\n    };\n\n    var $$asap$$browserGlobal = (typeof window !== 'undefined') ? window : {};\n    var $$asap$$BrowserMutationObserver = $$asap$$browserGlobal.MutationObserver || $$asap$$browserGlobal.WebKitMutationObserver;\n\n    // test for web worker but not in IE10\n    var $$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\n      typeof importScripts !== 'undefined' &&\n      typeof MessageChannel !== 'undefined';\n\n    // node\n    function $$asap$$useNextTick() {\n      return function() {\n        process.nextTick($$asap$$flush);\n      };\n    }\n\n    function $$asap$$useMutationObserver() {\n      var iterations = 0;\n      var observer = new $$asap$$BrowserMutationObserver($$asap$$flush);\n      var node = document.createTextNode('');\n      observer.observe(node, { characterData: true });\n\n      return function() {\n        node.data = (iterations = ++iterations % 2);\n      };\n    }\n\n    // web worker\n    function $$asap$$useMessageChannel() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = $$asap$$flush;\n      return function () {\n        channel.port2.postMessage(0);\n      };\n    }\n\n    function $$asap$$useSetTimeout() {\n      return function() {\n        setTimeout($$asap$$flush, 1);\n      };\n    }\n\n    var $$asap$$queue = new Array(1000);\n\n    function $$asap$$flush() {\n      for (var i = 0; i < $$asap$$len; i+=2) {\n        var callback = $$asap$$queue[i];\n        var arg = $$asap$$queue[i+1];\n\n        callback(arg);\n\n        $$asap$$queue[i] = undefined;\n        $$asap$$queue[i+1] = undefined;\n      }\n\n      $$asap$$len = 0;\n    }\n\n    var $$asap$$scheduleFlush;\n\n    // Decide what async method to use to triggering processing of queued callbacks:\n    if (typeof process !== 'undefined' && {}.toString.call(process) === '[object process]') {\n      $$asap$$scheduleFlush = $$asap$$useNextTick();\n    } else if ($$asap$$BrowserMutationObserver) {\n      $$asap$$scheduleFlush = $$asap$$useMutationObserver();\n    } else if ($$asap$$isWorker) {\n      $$asap$$scheduleFlush = $$asap$$useMessageChannel();\n    } else {\n      $$asap$$scheduleFlush = $$asap$$useSetTimeout();\n    }\n\n    function $$$internal$$noop() {}\n    var $$$internal$$PENDING   = void 0;\n    var $$$internal$$FULFILLED = 1;\n    var $$$internal$$REJECTED  = 2;\n    var $$$internal$$GET_THEN_ERROR = new $$$internal$$ErrorObject();\n\n    function $$$internal$$selfFullfillment() {\n      return new TypeError(\"You cannot resolve a promise with itself\");\n    }\n\n    function $$$internal$$cannotReturnOwn() {\n      return new TypeError('A promises callback cannot return that same promise.')\n    }\n\n    function $$$internal$$getThen(promise) {\n      try {\n        return promise.then;\n      } catch(error) {\n        $$$internal$$GET_THEN_ERROR.error = error;\n        return $$$internal$$GET_THEN_ERROR;\n      }\n    }\n\n    function $$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n      try {\n        then.call(value, fulfillmentHandler, rejectionHandler);\n      } catch(e) {\n        return e;\n      }\n    }\n\n    function $$$internal$$handleForeignThenable(promise, thenable, then) {\n       $$asap$$default(function(promise) {\n        var sealed = false;\n        var error = $$$internal$$tryThen(then, thenable, function(value) {\n          if (sealed) { return; }\n          sealed = true;\n          if (thenable !== value) {\n            $$$internal$$resolve(promise, value);\n          } else {\n            $$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          if (sealed) { return; }\n          sealed = true;\n\n          $$$internal$$reject(promise, reason);\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n        if (!sealed && error) {\n          sealed = true;\n          $$$internal$$reject(promise, error);\n        }\n      }, promise);\n    }\n\n    function $$$internal$$handleOwnThenable(promise, thenable) {\n      if (thenable._state === $$$internal$$FULFILLED) {\n        $$$internal$$fulfill(promise, thenable._result);\n      } else if (promise._state === $$$internal$$REJECTED) {\n        $$$internal$$reject(promise, thenable._result);\n      } else {\n        $$$internal$$subscribe(thenable, undefined, function(value) {\n          $$$internal$$resolve(promise, value);\n        }, function(reason) {\n          $$$internal$$reject(promise, reason);\n        });\n      }\n    }\n\n    function $$$internal$$handleMaybeThenable(promise, maybeThenable) {\n      if (maybeThenable.constructor === promise.constructor) {\n        $$$internal$$handleOwnThenable(promise, maybeThenable);\n      } else {\n        var then = $$$internal$$getThen(maybeThenable);\n\n        if (then === $$$internal$$GET_THEN_ERROR) {\n          $$$internal$$reject(promise, $$$internal$$GET_THEN_ERROR.error);\n        } else if (then === undefined) {\n          $$$internal$$fulfill(promise, maybeThenable);\n        } else if ($$utils$$isFunction(then)) {\n          $$$internal$$handleForeignThenable(promise, maybeThenable, then);\n        } else {\n          $$$internal$$fulfill(promise, maybeThenable);\n        }\n      }\n    }\n\n    function $$$internal$$resolve(promise, value) {\n      if (promise === value) {\n        $$$internal$$reject(promise, $$$internal$$selfFullfillment());\n      } else if ($$utils$$objectOrFunction(value)) {\n        $$$internal$$handleMaybeThenable(promise, value);\n      } else {\n        $$$internal$$fulfill(promise, value);\n      }\n    }\n\n    function $$$internal$$publishRejection(promise) {\n      if (promise._onerror) {\n        promise._onerror(promise._result);\n      }\n\n      $$$internal$$publish(promise);\n    }\n\n    function $$$internal$$fulfill(promise, value) {\n      if (promise._state !== $$$internal$$PENDING) { return; }\n\n      promise._result = value;\n      promise._state = $$$internal$$FULFILLED;\n\n      if (promise._subscribers.length === 0) {\n      } else {\n        $$asap$$default($$$internal$$publish, promise);\n      }\n    }\n\n    function $$$internal$$reject(promise, reason) {\n      if (promise._state !== $$$internal$$PENDING) { return; }\n      promise._state = $$$internal$$REJECTED;\n      promise._result = reason;\n\n      $$asap$$default($$$internal$$publishRejection, promise);\n    }\n\n    function $$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n      var subscribers = parent._subscribers;\n      var length = subscribers.length;\n\n      parent._onerror = null;\n\n      subscribers[length] = child;\n      subscribers[length + $$$internal$$FULFILLED] = onFulfillment;\n      subscribers[length + $$$internal$$REJECTED]  = onRejection;\n\n      if (length === 0 && parent._state) {\n        $$asap$$default($$$internal$$publish, parent);\n      }\n    }\n\n    function $$$internal$$publish(promise) {\n      var subscribers = promise._subscribers;\n      var settled = promise._state;\n\n      if (subscribers.length === 0) { return; }\n\n      var child, callback, detail = promise._result;\n\n      for (var i = 0; i < subscribers.length; i += 3) {\n        child = subscribers[i];\n        callback = subscribers[i + settled];\n\n        if (child) {\n          $$$internal$$invokeCallback(settled, child, callback, detail);\n        } else {\n          callback(detail);\n        }\n      }\n\n      promise._subscribers.length = 0;\n    }\n\n    function $$$internal$$ErrorObject() {\n      this.error = null;\n    }\n\n    var $$$internal$$TRY_CATCH_ERROR = new $$$internal$$ErrorObject();\n\n    function $$$internal$$tryCatch(callback, detail) {\n      try {\n        return callback(detail);\n      } catch(e) {\n        $$$internal$$TRY_CATCH_ERROR.error = e;\n        return $$$internal$$TRY_CATCH_ERROR;\n      }\n    }\n\n    function $$$internal$$invokeCallback(settled, promise, callback, detail) {\n      var hasCallback = $$utils$$isFunction(callback),\n          value, error, succeeded, failed;\n\n      if (hasCallback) {\n        value = $$$internal$$tryCatch(callback, detail);\n\n        if (value === $$$internal$$TRY_CATCH_ERROR) {\n          failed = true;\n          error = value.error;\n          value = null;\n        } else {\n          succeeded = true;\n        }\n\n        if (promise === value) {\n          $$$internal$$reject(promise, $$$internal$$cannotReturnOwn());\n          return;\n        }\n\n      } else {\n        value = detail;\n        succeeded = true;\n      }\n\n      if (promise._state !== $$$internal$$PENDING) {\n        // noop\n      } else if (hasCallback && succeeded) {\n        $$$internal$$resolve(promise, value);\n      } else if (failed) {\n        $$$internal$$reject(promise, error);\n      } else if (settled === $$$internal$$FULFILLED) {\n        $$$internal$$fulfill(promise, value);\n      } else if (settled === $$$internal$$REJECTED) {\n        $$$internal$$reject(promise, value);\n      }\n    }\n\n    function $$$internal$$initializePromise(promise, resolver) {\n      try {\n        resolver(function resolvePromise(value){\n          $$$internal$$resolve(promise, value);\n        }, function rejectPromise(reason) {\n          $$$internal$$reject(promise, reason);\n        });\n      } catch(e) {\n        $$$internal$$reject(promise, e);\n      }\n    }\n\n    function $$$enumerator$$makeSettledResult(state, position, value) {\n      if (state === $$$internal$$FULFILLED) {\n        return {\n          state: 'fulfilled',\n          value: value\n        };\n      } else {\n        return {\n          state: 'rejected',\n          reason: value\n        };\n      }\n    }\n\n    function $$$enumerator$$Enumerator(Constructor, input, abortOnReject, label) {\n      this._instanceConstructor = Constructor;\n      this.promise = new Constructor($$$internal$$noop, label);\n      this._abortOnReject = abortOnReject;\n\n      if (this._validateInput(input)) {\n        this._input     = input;\n        this.length     = input.length;\n        this._remaining = input.length;\n\n        this._init();\n\n        if (this.length === 0) {\n          $$$internal$$fulfill(this.promise, this._result);\n        } else {\n          this.length = this.length || 0;\n          this._enumerate();\n          if (this._remaining === 0) {\n            $$$internal$$fulfill(this.promise, this._result);\n          }\n        }\n      } else {\n        $$$internal$$reject(this.promise, this._validationError());\n      }\n    }\n\n    $$$enumerator$$Enumerator.prototype._validateInput = function(input) {\n      return $$utils$$isArray(input);\n    };\n\n    $$$enumerator$$Enumerator.prototype._validationError = function() {\n      return new Error('Array Methods must be provided an Array');\n    };\n\n    $$$enumerator$$Enumerator.prototype._init = function() {\n      this._result = new Array(this.length);\n    };\n\n    var $$$enumerator$$default = $$$enumerator$$Enumerator;\n\n    $$$enumerator$$Enumerator.prototype._enumerate = function() {\n      var length  = this.length;\n      var promise = this.promise;\n      var input   = this._input;\n\n      for (var i = 0; promise._state === $$$internal$$PENDING && i < length; i++) {\n        this._eachEntry(input[i], i);\n      }\n    };\n\n    $$$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\n      var c = this._instanceConstructor;\n      if ($$utils$$isMaybeThenable(entry)) {\n        if (entry.constructor === c && entry._state !== $$$internal$$PENDING) {\n          entry._onerror = null;\n          this._settledAt(entry._state, i, entry._result);\n        } else {\n          this._willSettleAt(c.resolve(entry), i);\n        }\n      } else {\n        this._remaining--;\n        this._result[i] = this._makeResult($$$internal$$FULFILLED, i, entry);\n      }\n    };\n\n    $$$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\n      var promise = this.promise;\n\n      if (promise._state === $$$internal$$PENDING) {\n        this._remaining--;\n\n        if (this._abortOnReject && state === $$$internal$$REJECTED) {\n          $$$internal$$reject(promise, value);\n        } else {\n          this._result[i] = this._makeResult(state, i, value);\n        }\n      }\n\n      if (this._remaining === 0) {\n        $$$internal$$fulfill(promise, this._result);\n      }\n    };\n\n    $$$enumerator$$Enumerator.prototype._makeResult = function(state, i, value) {\n      return value;\n    };\n\n    $$$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\n      var enumerator = this;\n\n      $$$internal$$subscribe(promise, undefined, function(value) {\n        enumerator._settledAt($$$internal$$FULFILLED, i, value);\n      }, function(reason) {\n        enumerator._settledAt($$$internal$$REJECTED, i, reason);\n      });\n    };\n\n    var $$promise$all$$default = function all(entries, label) {\n      return new $$$enumerator$$default(this, entries, true /* abort on reject */, label).promise;\n    };\n\n    var $$promise$race$$default = function race(entries, label) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      var promise = new Constructor($$$internal$$noop, label);\n\n      if (!$$utils$$isArray(entries)) {\n        $$$internal$$reject(promise, new TypeError('You must pass an array to race.'));\n        return promise;\n      }\n\n      var length = entries.length;\n\n      function onFulfillment(value) {\n        $$$internal$$resolve(promise, value);\n      }\n\n      function onRejection(reason) {\n        $$$internal$$reject(promise, reason);\n      }\n\n      for (var i = 0; promise._state === $$$internal$$PENDING && i < length; i++) {\n        $$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);\n      }\n\n      return promise;\n    };\n\n    var $$promise$resolve$$default = function resolve(object, label) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\n        return object;\n      }\n\n      var promise = new Constructor($$$internal$$noop, label);\n      $$$internal$$resolve(promise, object);\n      return promise;\n    };\n\n    var $$promise$reject$$default = function reject(reason, label) {\n      /*jshint validthis:true */\n      var Constructor = this;\n      var promise = new Constructor($$$internal$$noop, label);\n      $$$internal$$reject(promise, reason);\n      return promise;\n    };\n\n    var $$es6$promise$promise$$counter = 0;\n\n    function $$es6$promise$promise$$needsResolver() {\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n    }\n\n    function $$es6$promise$promise$$needsNew() {\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n    }\n\n    var $$es6$promise$promise$$default = $$es6$promise$promise$$Promise;\n\n    /**\n      Promise objects represent the eventual result of an asynchronous operation. The\n      primary way of interacting with a promise is through its `then` method, which\n      registers callbacks to receive either a promises eventual value or the reason\n      why the promise cannot be fulfilled.\n\n      Terminology\n      -----------\n\n      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n      - `thenable` is an object or function that defines a `then` method.\n      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n      - `exception` is a value that is thrown using the throw statement.\n      - `reason` is a value that indicates why a promise was rejected.\n      - `settled` the final resting state of a promise, fulfilled or rejected.\n\n      A promise can be in one of three states: pending, fulfilled, or rejected.\n\n      Promises that are fulfilled have a fulfillment value and are in the fulfilled\n      state.  Promises that are rejected have a rejection reason and are in the\n      rejected state.  A fulfillment value is never a thenable.\n\n      Promises can also be said to *resolve* a value.  If this value is also a\n      promise, then the original promise's settled state will match the value's\n      settled state.  So a promise that *resolves* a promise that rejects will\n      itself reject, and a promise that *resolves* a promise that fulfills will\n      itself fulfill.\n\n\n      Basic Usage:\n      ------------\n\n      ```js\n      var promise = new Promise(function(resolve, reject) {\n        // on success\n        resolve(value);\n\n        // on failure\n        reject(reason);\n      });\n\n      promise.then(function(value) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Advanced Usage:\n      ---------------\n\n      Promises shine when abstracting away asynchronous interactions such as\n      `XMLHttpRequest`s.\n\n      ```js\n      function getJSON(url) {\n        return new Promise(function(resolve, reject){\n          var xhr = new XMLHttpRequest();\n\n          xhr.open('GET', url);\n          xhr.onreadystatechange = handler;\n          xhr.responseType = 'json';\n          xhr.setRequestHeader('Accept', 'application/json');\n          xhr.send();\n\n          function handler() {\n            if (this.readyState === this.DONE) {\n              if (this.status === 200) {\n                resolve(this.response);\n              } else {\n                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n              }\n            }\n          };\n        });\n      }\n\n      getJSON('/posts.json').then(function(json) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Unlike callbacks, promises are great composable primitives.\n\n      ```js\n      Promise.all([\n        getJSON('/posts'),\n        getJSON('/comments')\n      ]).then(function(values){\n        values[0] // => postsJSON\n        values[1] // => commentsJSON\n\n        return values;\n      });\n      ```\n\n      @class Promise\n      @param {function} resolver\n      Useful for tooling.\n      @constructor\n    */\n    function $$es6$promise$promise$$Promise(resolver) {\n      this._id = $$es6$promise$promise$$counter++;\n      this._state = undefined;\n      this._result = undefined;\n      this._subscribers = [];\n\n      if ($$$internal$$noop !== resolver) {\n        if (!$$utils$$isFunction(resolver)) {\n          $$es6$promise$promise$$needsResolver();\n        }\n\n        if (!(this instanceof $$es6$promise$promise$$Promise)) {\n          $$es6$promise$promise$$needsNew();\n        }\n\n        $$$internal$$initializePromise(this, resolver);\n      }\n    }\n\n    $$es6$promise$promise$$Promise.all = $$promise$all$$default;\n    $$es6$promise$promise$$Promise.race = $$promise$race$$default;\n    $$es6$promise$promise$$Promise.resolve = $$promise$resolve$$default;\n    $$es6$promise$promise$$Promise.reject = $$promise$reject$$default;\n\n    $$es6$promise$promise$$Promise.prototype = {\n      constructor: $$es6$promise$promise$$Promise,\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n\n      ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n\n      Chaining\n      --------\n\n      The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n\n      ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n\n      findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\n      ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n\n      Assimilation\n      ------------\n\n      Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n\n      If the assimliated promise rejects, then the downstream promise will also reject.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n\n      Simple Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var result;\n\n      try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n\n      Advanced Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var author, books;\n\n      try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n\n      function foundBooks(books) {\n\n      }\n\n      function failure(reason) {\n\n      }\n\n      findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      Useful for tooling.\n      @return {Promise}\n    */\n      then: function(onFulfillment, onRejection) {\n        var parent = this;\n        var state = parent._state;\n\n        if (state === $$$internal$$FULFILLED && !onFulfillment || state === $$$internal$$REJECTED && !onRejection) {\n          return this;\n        }\n\n        var child = new this.constructor($$$internal$$noop);\n        var result = parent._result;\n\n        if (state) {\n          var callback = arguments[state - 1];\n          $$asap$$default(function(){\n            $$$internal$$invokeCallback(state, child, callback, result);\n          });\n        } else {\n          $$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n        }\n\n        return child;\n      },\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n\n      ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n\n      // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n\n      // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method catch\n      @param {Function} onRejection\n      Useful for tooling.\n      @return {Promise}\n    */\n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n\n    var $$es6$promise$polyfill$$default = function polyfill() {\n      var local;\n\n      if (typeof global !== 'undefined') {\n        local = global;\n      } else if (typeof window !== 'undefined' && window.document) {\n        local = window;\n      } else {\n        local = self;\n      }\n\n      var es6PromiseSupport =\n        \"Promise\" in local &&\n        // Some of these methods are missing from\n        // Firefox/Chrome experimental implementations\n        \"resolve\" in local.Promise &&\n        \"reject\" in local.Promise &&\n        \"all\" in local.Promise &&\n        \"race\" in local.Promise &&\n        // Older version of the spec had a resolver object\n        // as the arg rather than a function\n        (function() {\n          var resolve;\n          new local.Promise(function(r) { resolve = r; });\n          return $$utils$$isFunction(resolve);\n        }());\n\n      if (!es6PromiseSupport) {\n        local.Promise = $$es6$promise$promise$$default;\n      }\n    };\n\n    var es6$promise$umd$$ES6Promise = {\n      'Promise': $$es6$promise$promise$$default,\n      'polyfill': $$es6$promise$polyfill$$default\n    };\n\n    /* global define:true module:true window: true */\n    if (typeof define === 'function' && define['amd']) {\n      define(function() { return es6$promise$umd$$ES6Promise; });\n    } else if (typeof module !== 'undefined' && module['exports']) {\n      module['exports'] = es6$promise$umd$$ES6Promise;\n    } else if (typeof this !== 'undefined') {\n      this['ES6Promise'] = es6$promise$umd$$ES6Promise;\n    }\n}).call(this);"]}