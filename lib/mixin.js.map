{"version":3,"sources":["../src/mixin.js"],"names":[],"mappings":";;;;;;;;sBAAmB,QAAQ;;IAAf,CAAC;;AAEb,IAAM,KAAK,GAAG;AACZ,MAAI,EAAA,cAAC,KAAK,EAAE,GAAG,EAAE;AACf,QAAM,SAAS,GAAG,IAAI,CAAC;AACvB,QAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,IAAI,EAAE,CAAC;AACvD,QAAM,aAAa,GAAG,QAAQ,CAAC,aAAa,GAAG,QAAQ,CAAC,aAAa,IAAI,EAAE,CAAC;AAC5E,QAAI,WAAW,GAAG,IAAI,CAAC;;AAEvB,QAAI,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;AACrB,iBAAW,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;KAC1C,MAAM,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;AACzB,iBAAW,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,UAAA,MAAM;eAAI,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;OAAA,CAAC,CAAC;KACxF;;AAED,iBAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAChC,WAAO,WAAW,CAAC;GACpB;;AAED,sBAAoB,EAAA,gCAAG;AACrB,QAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;AAChC,QAAI,QAAQ,EAAE;AACZ,UAAM,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC;AAC7C,UAAI,aAAa,EAAE;AACjB,SAAC,CAAC,IAAI,CAAC,aAAa,EAAE,UAAA,EAAE;iBAAI,EAAE,EAAE;SAAA,CAAC,CAAC;OACnC;KACF;GACF;CACF,CAAC;;qBAEa,KAAK","file":"mixin.js","sourcesContent":["import * as _ from 'lodash';\n\nconst Mixin = {\n  wire(store, arg) {\n    const component = this;\n    const harukaze = this._harukaze = this._harukaze || {};\n    const unsubscribers = harukaze.unsubscribers = harukaze.unsubscribers || [];\n    let unsubscribe = null;\n\n    if (_.isFunction(arg)) {\n      unsubscribe = store.changes.onValue(arg);\n    } else if (_.isArray(arg)) {\n      unsubscribe = store.changes.onValue(output => component.setState(_.pick(output, arg)));\n    }\n\n    unsubscribers.push(unsubscribe);\n    return unsubscribe;\n  },\n\n  componentWillUnmount() {\n    const harukaze = this._harukaze;\n    if (harukaze) {\n      const unsubscribers = harukaze.unsubscribers;\n      if (unsubscribers) {\n        _.each(unsubscribers, fn => fn());\n      }\n    }\n  },\n};\n\nexport default Mixin;\n"]}